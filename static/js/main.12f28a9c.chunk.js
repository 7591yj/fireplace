(this.webpackJsonpfireplace=this.webpackJsonpfireplace||[]).push([[0],{46:function(e,t,n){},62:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),r=n(47),s=n.n(r),i=n(11),o=n(19),j=n(34),l=n(14),u=n(17),b=n(18),d=(n(62),n(5)),O=function(e){var t=e.userObj;return Object(d.jsx)("header",{children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{className:"home",children:Object(d.jsx)(j.b,{to:"/",style:{marginRight:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:Object(d.jsx)(u.a,{icon:b.c,color:"#2f3640",size:"2x",id:"home-item"})})}),Object(d.jsx)("li",{className:"profile",children:t&&Object(d.jsx)(j.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:Object(d.jsx)(u.a,{icon:b.h,color:"#2f3640",size:"2x"})})}),Object(d.jsx)("div",{className:"nav-div",children:Object(d.jsx)("li",{children:t&&Object(d.jsx)(j.b,{to:"/setting",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:Object(d.jsx)(u.a,{icon:b.b,color:"#2f3640",size:"2x"})})})})]})})},m=n(0),x=n.n(m),f=n(1),h=n(50),p=n(51),g=n(21),v=n(28),y=(Object(h.a)({apiKey:"AIzaSyCbGkAyzwTJCg6w9fwDle8VTaLtbDxvKGM",authDomain:"fireplace-c1e39.firebaseapp.com",projectId:"fireplace-c1e39",storageBucket:"fireplace-c1e39.appspot.com",messagingSenderId:"484897913037",appId:"1:484897913037:web:64f0fe8178697abe255184"}),Object(p.a)()),N=Object(g.e)(),w=Object(v.c)(),k=(n(46),function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),j=s[0],l=s[1],O=Object(c.useState)(!0),m=Object(i.a)(O,2),h=m[0],p=m[1],g=Object(c.useState)(""),v=Object(i.a)(g,2),N=v[0],w=v[1],k=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?a(c):"password"===n&&l(c)},S=function(){var e=Object(f.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!h){e.next=8;break}return e.next=5,Object(o.c)(y,n,j);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,Object(o.e)(y,n,j);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"authFormContainer",children:[Object(d.jsx)(u.a,{icon:b.c,size:"3x",style:{margin:"10px"}}),Object(d.jsx)("span",{style:{fontWeight:600,fontSize:"36px"},children:"FirePlace"}),Object(d.jsxs)("span",{style:{fontWeight:400,fontSize:"12px",textAlign:"center",margin:"10px"},children:["Welcome to FirePlace! Please"," ",h?"create an account":"sign in"," to continue."]}),Object(d.jsxs)("form",{onSubmit:S,children:[Object(d.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:k,className:"formInput"}),Object(d.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:j,onChange:k,className:"formInput"}),Object(d.jsx)("input",{type:"submit",value:h?"Create account":"Sign in",className:"formBtn"}),N&&Object(d.jsx)("span",{className:"error",children:N})]}),Object(d.jsx)("span",{onClick:function(){p((function(e){return!e}))},className:"changer",children:h?"or sign in":"or create account"}),Object(d.jsxs)("span",{style:{fontWeight:400,fontSize:"12px",textAlign:"center",margin:"10px"},children:["Please note that using Google or Github accout for logging in is highly recommanded, ",Object(d.jsx)("br",{}),"but you can rather use an email and password."]})]})})}),S=n(44),I=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c,r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,e.prev=1,"google"!==n){e.next=10;break}return c=new o.b,e.next=6,Object(o.f)(y,c);case 6:r=e.sent,o.b.credentialFromResult(r),e.next=16;break;case 10:if("github"!==n){e.next=16;break}return c=new o.a,e.next=14,Object(o.f)(y,c);case 14:s=e.sent,o.a.credentialFromResult(s);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),a(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"authContainer",children:[Object(d.jsx)(k,{}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("button",{onClick:r,name:"google",className:"google",children:[Object(d.jsx)(u.a,{icon:S.b}),Object(d.jsx)("span",{className:"oauth",children:"Continue with Google"})]}),Object(d.jsxs)("button",{onClick:r,name:"github",className:"github",children:[Object(d.jsx)(u.a,{icon:S.a}),Object(d.jsx)("span",{className:"oauth",children:"Continue with Github"})]}),n&&Object(d.jsx)("span",{className:"error",children:n})]})]})},C=(n(69),function(e){var t=e.refreshUser,n=e.userObj,a=Object(l.f)(),r=Object(c.useState)(n.displayName),s=Object(i.a)(r,2),j=s[0],O=s[1],m=Object(c.useState)(!1),h=Object(i.a)(m,2),p=h[0],g=h[1],v=function(){var e=Object(f.a)(x.a.mark((function e(c){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),n.displayName===j){e.next=6;break}return e.next=4,Object(o.g)(y.currentUser,{displayName:j});case 4:g(!0),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=y.currentUser.email;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"emailViewer",children:[Object(d.jsx)("span",{children:Object(d.jsx)("strong",{children:"Your email:"})}),Object(d.jsx)("span",{className:"email",children:N}),Object(d.jsx)("span",{className:"emailWarn",children:"You cannot change your email."})]}),Object(d.jsx)("span",{children:Object(d.jsx)("strong",{children:"Your username:"})}),Object(d.jsxs)("form",{onSubmit:v,className:"displayNameEdit",children:[Object(d.jsx)("input",{onChange:function(e){var t=e.target.value;O(t)},type:"text",placeholder:"Display name",value:j,className:"formInput"}),Object(d.jsx)("input",{type:"submit",value:"Update username",className:"formBtn"})]}),p&&Object(d.jsxs)("div",{className:"checkerDiv",children:[Object(d.jsx)(u.a,{icon:b.a,className:"checker"}),Object(d.jsx)("span",{children:" Changes made."})]}),Object(d.jsx)("button",{className:"logOut",onClick:function(){y.signOut(),a.push("/")},children:"Log out"})]})})}),F=n(39),D=n(30),U=(n(70),function(e){var t=e.igniteObject,n=e.isOwner,a=Object(c.useState)(!1),r=Object(i.a)(a,2),s=r[0],o=r[1],j=Object(c.useState)(t.text),l=Object(i.a)(j,2),O=l[0],m=l[1],h=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to quench this Ignite?")){e.next=4;break}return e.next=4,Object(g.c)(Object(g.d)(N,"ignites",t.id));case 4:if(!t.attachmentURL){e.next=7;break}return e.next=7,Object(v.a)(Object(v.d)(w,t.attachmentURL));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o((function(e){return!e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t,O),e.next=4,Object(g.i)(Object(g.d)(N,"ignites/".concat(t.id)),{text:O});case 4:o(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{children:s?Object(d.jsx)(d.Fragment,{children:n&&Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"igniteForm",children:[Object(d.jsxs)("form",{onSubmit:y,className:"container",children:[Object(d.jsx)("input",{type:"text",placeholder:"Edit your Ignite",value:O,required:!0,onChange:function(e){var t=e.target.value;m(t)}}),Object(d.jsx)("input",{type:"submit",value:"Update Ignite"})]}),Object(d.jsx)("button",{onClick:p,children:"Cancel"})]})})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"container",children:[t.attachmentURL&&Object(d.jsx)("img",{className:"igniteImage",src:t.attachmentURL,alt:"Attached file"}),Object(d.jsxs)("span",{className:"igniteWrittenBy",children:["Written by: ",t.creatorDisplayName]}),Object(d.jsxs)("div",{className:"igniteBottomRow",children:[Object(d.jsx)("h4",{className:"igniteTitle",children:t.text}),n&&Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"igniteControls",children:[Object(d.jsx)(u.a,{icon:b.e,color:"#2f3640",size:"1x",onClick:h,className:"igniteDelete"}),Object(d.jsx)(u.a,{icon:b.f,color:"#2f3640",size:"1x",onClick:p,className:"igniteEdit"})]})})]})]})})})}),z=(n(71),function(e){var t=e.userObj,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],s=a[1],o=function(){var e=Object(f.a)(x.a.mark((function e(){var n,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(D.i)(Object(D.b)(N,"ignites"),Object(D.k)("creatorId","==",t.uid)),e.next=3,Object(D.e)(n);case 3:c=e.sent,a=c.docs.map((function(e){return Object(F.a)({id:e.id},e.data())})),s(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return function(){o()}}),[o()]);var j=y.currentUser.photoURL;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"profileIntro",children:[Object(d.jsx)("img",{src:j,alt:"Profile",className:"profileImg"}),Object(d.jsx)("h2",{children:t.displayName})]}),Object(d.jsx)("h3",{children:"My Ignites: "}),Object(d.jsx)("div",{children:r.map((function(e){return Object(d.jsx)(U,{igniteObject:e,isOwner:e.creatorId===t.uid},e.id)}))})]})}),A=n(76),L=(n(72),function(e){var t=e.userObj,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(""),j=Object(i.a)(o,2),l=j[0],O=j[1],m=function(){var e=Object(f.a)(x.a.mark((function e(n){var c,a,i,o,j;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c="",""===l){e.next=10;break}return a=Object(v.d)(w,"".concat(t.uid,"/").concat(Object(A.a)())),e.next=6,Object(v.e)(a,l,"data_url");case 6:return i=e.sent,e.next=9,Object(v.b)(i.ref);case 9:c=e.sent;case 10:return o={text:r,createdAt:Date.now(),creatorId:t.uid,creatorDisplayName:t.displayName,attachmentURL:c},e.prev=11,e.next=14,Object(g.a)(Object(g.b)(N,"ignites"),o);case 14:j=e.sent,console.log("Document written with ID: ",j.id),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),console.log("Error while adding document: ",e.t0);case 21:s(""),O(""),h.current.value="";case 24:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(t){return e.apply(this,arguments)}}(),h=Object(c.useRef)();return Object(d.jsxs)("form",{onSubmit:m,className:"form",children:[l&&Object(d.jsxs)("div",{className:"factoryForm__attachment",children:[Object(d.jsx)("img",{alt:"Attachment preview",src:l,style:{backgroundImage:l}}),Object(d.jsxs)("div",{className:"factoryForm__clear",onClick:function(){O(""),h.current.value=""},children:[Object(d.jsx)(u.a,{icon:b.g}),Object(d.jsx)("span",{children:" Remove"})]})]}),Object(d.jsx)("input",{className:"formInput",value:r,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(d.jsx)(u.a,{icon:b.d}),Object(d.jsx)("span",{style:{fontSize:12},children:" Add a picture"})]}),Object(d.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){console.log(e);var t=e.currentTarget.result;O(t)},n.readAsDataURL(t)},ref:h,style:{opacity:0}}),Object(d.jsx)("input",{type:"submit",value:"Ignite",className:"formBtn"})]})]})}),R=function(e){var t=e.userObj,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=Object(g.h)(Object(g.b)(Object(g.e)(),"ignites"),Object(g.g)("createdAt","desc")),t=Object(g.f)(e,(function(e){var t=e.docs.map((function(e){return Object(F.a)({id:e.id},e.data())}));s(t)}));return function(){t()}}),[]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(L,{userObj:t}),Object(d.jsx)("div",{children:r.map((function(e){return Object(d.jsx)(U,{igniteObject:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},E=function(e){var t=e.refreshUser,n=e.isLoggedIn,c=e.userObj;return Object(d.jsxs)(j.a,{children:[n&&Object(d.jsx)(O,{userObj:c}),Object(d.jsx)(l.c,{children:n?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",children:Object(d.jsx)(R,{userObj:c})}),Object(d.jsx)(l.a,{exact:!0,path:"/profile",children:Object(d.jsx)(z,{userObj:c})}),Object(d.jsx)(l.a,{exact:!0,path:"/setting",children:Object(d.jsx)(C,{userObj:c,refreshUser:t})})]}):Object(d.jsx)(l.a,{exact:!0,path:"/",children:Object(d.jsx)(I,{})})})]})};n(73);var W=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(i.a)(r,2),j=s[0],l=s[1],O=Object(c.useState)(null),m=Object(i.a)(O,2),x=m[0],f=m[1];return Object(c.useEffect)((function(){y.onAuthStateChanged((function(e){if(e){if(l(!0),null===e.displayName){var t=e.email.indexOf("@"),n=e.email.substring(0,t);Object(o.g)(e,{displayName:n})}f({displayName:e.displayName,uid:e.uid})}else f(null),l(!1);a(!0)}))}),[]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"appContainer",children:[n?Object(d.jsx)(E,{refreshUser:function(){f({displayName:y.currentUser.displayName,uid:y.currentUser.uid})},isLoggedIn:j,userObj:x}):Object(d.jsxs)("div",{className:"init-div",children:[Object(d.jsx)(u.a,{className:"init-icon",icon:b.c,color:"#2f3640",size:"2x"}),Object(d.jsx)("span",{className:"init-text",children:"Initializing..."})]}),Object(d.jsxs)("footer",{children:["FirePlace ",(new Date).getFullYear()," \xb7 icons delivered by"," ",Object(d.jsx)("a",{className:"footerA",href:"https://fontawesome.com/",children:"Font Awesome"}),', favicon uses "fire" icon from the same origin but with a circle background']})]})})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(W,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.12f28a9c.chunk.js.map