(this.webpackJsonpfireplace=this.webpackJsonpfireplace||[]).push([[0],{46:function(e,t,c){},62:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var n=c(8),a=c.n(n),r=c(47),s=c.n(r),i=c(11),j=c(19),o=c(34),l=c(14),u=c(17),b=c(18),O=(c(62),c(5)),d=function(e){var t=e.userObj;return Object(O.jsx)("header",{children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{className:"home",children:Object(O.jsx)(o.b,{to:"/",style:{marginRight:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:Object(O.jsx)(u.a,{icon:b.c,color:"#2f3640",size:"2x",id:"home-item"})})}),Object(O.jsx)("li",{className:"profile",children:t&&Object(O.jsx)(o.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:Object(O.jsx)(u.a,{icon:b.h,color:"#2f3640",size:"2x"})})}),Object(O.jsx)("div",{className:"nav-div",children:Object(O.jsx)("li",{children:t&&Object(O.jsx)(o.b,{to:"/setting",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:Object(O.jsx)(u.a,{icon:b.b,color:"#2f3640",size:"2x"})})})})]})})},f=c(0),m=c.n(f),x=c(1),h=c(50),p=c(51),g=c(21),v=c(28),y=(Object(h.a)({apiKey:"AIzaSyCbGkAyzwTJCg6w9fwDle8VTaLtbDxvKGM",authDomain:"fireplace-c1e39.firebaseapp.com",projectId:"fireplace-c1e39",storageBucket:"fireplace-c1e39.appspot.com",messagingSenderId:"484897913037",appId:"1:484897913037:web:64f0fe8178697abe255184"}),Object(p.a)()),N=Object(g.e)(),w=Object(v.c)(),k=(c(46),function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(n.useState)(!0),f=Object(i.a)(d,2),h=f[0],p=f[1],g=Object(n.useState)(""),v=Object(i.a)(g,2),N=v[0],w=v[1],k=function(e){var t=e.target,c=t.name,n=t.value;"email"===c?a(n):"password"===c&&l(n)},S=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!h){e.next=8;break}return e.next=5,Object(j.c)(y,c,o);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,Object(j.e)(y,c,o);case 10:n=e.sent;case 11:console.log(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"authFormContainer",children:[Object(O.jsx)(u.a,{icon:b.c,size:"3x",style:{margin:"10px"}}),Object(O.jsx)("span",{style:{fontWeight:600,fontSize:"36px"},children:"FirePlace"}),Object(O.jsxs)("span",{style:{fontWeight:400,fontSize:"12px",textAlign:"center",margin:"10px"},children:["Welcome to FirePlace! Please"," ",h?"create an account":"sign in"," to continue.",Object(O.jsx)("br",{}),"Or, if you'd like, you can rather use Google or Github account."]}),Object(O.jsxs)("form",{onSubmit:S,children:[Object(O.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:c,onChange:k,className:"formInput"}),Object(O.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:o,onChange:k,className:"formInput"}),Object(O.jsx)("input",{type:"submit",value:h?"Create account":"Sign in",className:"formBtn"}),N&&Object(O.jsx)("span",{className:"error",children:N})]}),Object(O.jsx)("span",{onClick:function(){p((function(e){return!e}))},className:"changer",children:h?"or sign in":"or create account"})]})})}),S=c(44),I=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],r=function(){var e=Object(x.a)(m.a.mark((function e(t){var c,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.target.name,e.prev=1,"google"!==c){e.next=10;break}return n=new j.b,e.next=6,Object(j.f)(y,n);case 6:r=e.sent,j.b.credentialFromResult(r),e.next=16;break;case 10:if("github"!==c){e.next=16;break}return n=new j.a,e.next=14,Object(j.f)(y,n);case 14:s=e.sent,j.a.credentialFromResult(s);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),a(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"authContainer",children:[Object(O.jsx)(k,{}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("button",{onClick:r,name:"google",className:"google",children:[Object(O.jsx)(u.a,{icon:S.b}),Object(O.jsx)("span",{className:"oauth",children:"Continue with Google"})]}),Object(O.jsxs)("button",{onClick:r,name:"github",className:"github",children:[Object(O.jsx)(u.a,{icon:S.a}),Object(O.jsx)("span",{className:"oauth",children:"Continue with Github"})]}),c&&Object(O.jsx)("span",{className:"error",children:c})]})]})},C=(c(69),function(e){var t=e.refreshUser,c=e.userObj,a=Object(l.f)(),r=Object(n.useState)(c.displayName),s=Object(i.a)(r,2),o=s[0],d=s[1],f=Object(n.useState)(!1),h=Object(i.a)(f,2),p=h[0],g=h[1],v=function(){var e=Object(x.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c.displayName===o){e.next=6;break}return e.next=4,Object(j.g)(y.currentUser,{displayName:o});case 4:g(!0),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=y.currentUser.email;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"emailViewer",children:[Object(O.jsx)("span",{children:Object(O.jsx)("strong",{children:"Your email:"})}),Object(O.jsx)("span",{className:"email",children:N}),Object(O.jsx)("span",{className:"emailWarn",children:"You cannot change your email."})]}),Object(O.jsx)("span",{children:Object(O.jsx)("strong",{children:"Your username:"})}),Object(O.jsxs)("form",{onSubmit:v,className:"displayNameEdit",children:[Object(O.jsx)("input",{onChange:function(e){var t=e.target.value;d(t)},type:"text",placeholder:"Display name",value:o,className:"formInput"}),Object(O.jsx)("input",{type:"submit",value:"Update username",className:"formBtn"})]}),p&&Object(O.jsxs)("div",{className:"checkerDiv",children:[Object(O.jsx)(u.a,{icon:b.a,className:"checker"}),Object(O.jsx)("span",{children:" Changes made."})]}),Object(O.jsx)("button",{className:"logOut",onClick:function(){y.signOut(),a.push("/")},children:"Log out"})]})})}),F=c(39),D=c(30),U=(c(70),function(e){var t=e.igniteObject,c=e.isOwner,a=Object(n.useState)(!1),r=Object(i.a)(a,2),s=r[0],j=r[1],o=Object(n.useState)(t.text),l=Object(i.a)(o,2),d=l[0],f=l[1],h=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to quench this Ignite?")){e.next=4;break}return e.next=4,Object(g.c)(Object(g.d)(N,"ignites",t.id));case 4:if(!t.attachmentURL){e.next=7;break}return e.next=7,Object(v.a)(Object(v.d)(w,t.attachmentURL));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j((function(e){return!e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(m.a.mark((function e(c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),console.log(t,d),e.next=4,Object(g.i)(Object(g.d)(N,"ignites/".concat(t.id)),{text:d});case 4:j(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{children:s?Object(O.jsx)(O.Fragment,{children:c&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"igniteForm",children:[Object(O.jsxs)("form",{onSubmit:y,className:"container",children:[Object(O.jsx)("input",{type:"text",placeholder:"Edit your Ignite",value:d,required:!0,onChange:function(e){var t=e.target.value;f(t)}}),Object(O.jsx)("input",{type:"submit",value:"Update Ignite"})]}),Object(O.jsx)("button",{onClick:p,children:"Cancel"})]})})}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"container",children:[t.attachmentURL&&Object(O.jsx)("img",{className:"igniteImage",src:t.attachmentURL,alt:"Attached file"}),Object(O.jsxs)("span",{className:"igniteWrittenBy",children:["Written by: ",t.creatorDisplayName]}),Object(O.jsxs)("div",{className:"igniteBottomRow",children:[Object(O.jsx)("h4",{className:"igniteTitle",children:t.text}),c&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"igniteControls",children:[Object(O.jsx)(u.a,{icon:b.e,color:"#2f3640",size:"1x",onClick:h,className:"igniteDelete"}),Object(O.jsx)(u.a,{icon:b.f,color:"#2f3640",size:"1x",onClick:p,className:"igniteEdit"})]})})]})]})})})}),z=(c(71),function(e){var t=e.userObj,c=Object(n.useState)([]),a=Object(i.a)(c,2),r=a[0],s=a[1],j=function(){var e=Object(x.a)(m.a.mark((function e(){var c,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(D.i)(Object(D.b)(N,"ignites"),Object(D.k)("creatorId","==",t.uid)),e.next=3,Object(D.e)(c);case 3:n=e.sent,a=n.docs.map((function(e){return Object(F.a)({id:e.id},e.data())})),s(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return function(){j()}}),[j()]);var o=y.currentUser.photoURL;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"profileIntro",children:[Object(O.jsx)("img",{src:o,alt:"Profile",className:"profileImg"}),Object(O.jsx)("h2",{children:t.displayName})]}),Object(O.jsx)("h3",{children:"My Ignites: "}),Object(O.jsx)("div",{children:r.map((function(e){return Object(O.jsx)(U,{igniteObject:e,isOwner:e.creatorId===t.uid},e.id)}))})]})}),L=c(76),R=(c(72),function(e){var t=e.userObj,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],s=a[1],j=Object(n.useState)(""),o=Object(i.a)(j,2),l=o[0],d=o[1],f=function(){var e=Object(x.a)(m.a.mark((function e(c){var n,a,i,j,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),n="",""===l){e.next=10;break}return a=Object(v.d)(w,"".concat(t.uid,"/").concat(Object(L.a)())),e.next=6,Object(v.e)(a,l,"data_url");case 6:return i=e.sent,e.next=9,Object(v.b)(i.ref);case 9:n=e.sent;case 10:return j={text:r,createdAt:Date.now(),creatorId:t.uid,creatorDisplayName:t.displayName,attachmentURL:n},e.prev=11,e.next=14,Object(g.a)(Object(g.b)(N,"ignites"),j);case 14:o=e.sent,console.log("Document written with ID: ",o.id),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),console.log("Error while adding document: ",e.t0);case 21:s(""),d(""),h.current.value="";case 24:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(t){return e.apply(this,arguments)}}(),h=Object(n.useRef)();return Object(O.jsxs)("form",{onSubmit:f,className:"form",children:[l&&Object(O.jsxs)("div",{className:"factoryForm__attachment",children:[Object(O.jsx)("img",{alt:"Attachment preview",src:l,style:{backgroundImage:l}}),Object(O.jsxs)("div",{className:"factoryForm__clear",onClick:function(){d(""),h.current.value=""},children:[Object(O.jsx)(u.a,{icon:b.g}),Object(O.jsx)("span",{children:" Remove"})]})]}),Object(O.jsx)("input",{className:"formInput",value:r,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(O.jsx)(u.a,{icon:b.d}),Object(O.jsx)("span",{style:{fontSize:12},children:" Add a picture"})]}),Object(O.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],c=new FileReader;c.onloadend=function(e){console.log(e);var t=e.currentTarget.result;d(t)},c.readAsDataURL(t)},ref:h,style:{opacity:0}}),Object(O.jsx)("input",{type:"submit",value:"Ignite",className:"formBtn"})]})]})}),A=function(e){var t=e.userObj,c=Object(n.useState)([]),a=Object(i.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var e=Object(g.h)(Object(g.b)(Object(g.e)(),"ignites"),Object(g.g)("createdAt","desc")),t=Object(g.f)(e,(function(e){var t=e.docs.map((function(e){return Object(F.a)({id:e.id},e.data())}));s(t)}));return function(){t()}}),[]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(R,{userObj:t}),Object(O.jsx)("div",{children:r.map((function(e){return Object(O.jsx)(U,{igniteObject:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},E=function(e){var t=e.refreshUser,c=e.isLoggedIn,n=e.userObj;return Object(O.jsxs)(o.a,{children:[c&&Object(O.jsx)(d,{userObj:n}),Object(O.jsx)(l.c,{children:c?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/",children:Object(O.jsx)(A,{userObj:n})}),Object(O.jsx)(l.a,{exact:!0,path:"/profile",children:Object(O.jsx)(z,{userObj:n})}),Object(O.jsx)(l.a,{exact:!0,path:"/setting",children:Object(O.jsx)(C,{userObj:n,refreshUser:t})})]}):Object(O.jsx)(l.a,{exact:!0,path:"/",children:Object(O.jsx)(I,{})})})]})};c(73);var B=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(n.useState)(null),f=Object(i.a)(d,2),m=f[0],x=f[1];return Object(n.useEffect)((function(){y.onAuthStateChanged((function(e){if(e){if(l(!0),null===e.displayName){var t=e.email.indexOf("@"),c=e.email.substring(0,t);Object(j.g)(e,{displayName:c})}x({displayName:e.displayName,uid:e.uid})}else x(null),l(!1);a(!0)}))}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"appContainer",children:[c?Object(O.jsx)(E,{refreshUser:function(){x({displayName:y.currentUser.displayName,uid:y.currentUser.uid})},isLoggedIn:o,userObj:m}):Object(O.jsxs)("div",{className:"init-div",children:[Object(O.jsx)(u.a,{className:"init-icon",icon:b.c,color:"#2f3640",size:"2x"}),Object(O.jsx)("span",{className:"init-text",children:"Initializing..."})]}),Object(O.jsxs)("footer",{children:["FirePlace ",(new Date).getFullYear()," \xb7 icons delivered by"," ",Object(O.jsx)("a",{className:"footerA",href:"https://fontawesome.com/",children:"Font Awesome"}),', favicon uses "fire" icon from the same origin but with a circle background']})]})})};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.f14007c9.chunk.js.map